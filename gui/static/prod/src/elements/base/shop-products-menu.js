import{dataSourceMixin}from"../../core/mixins/datasource-mixin.js";import{utilsMixin}from"../../core/mixins/utils-mixin.js";import{BaseElement}from"../../core/base-element.js";export const ShopProductsMenuBase=class extends utilsMixin(dataSourceMixin(BaseElement)){constructor(){super();this.currentData=[]}static get is(){return"shop-products-menu"}static get properties(){return{icon:String,params:Object,title:String,variable:String,menu_open:Boolean}}firstUpdated(changedProperties){super.firstUpdated(changedProperties);const self=this;this.loader.then(dsc=>{const objs={};for(var d=0,itemT;d<dsc.data.length;d++){itemT=dsc.data[d];if(!objs[itemT.category]){objs[itemT.category]=[]}var toPush={name:itemT.group,href:itemT.links};objs[itemT.category].push(toPush)}self.currentData=self._toArray(objs)})}_followLink(evt){const dataAction=evt.currentTarget.dataLink;this.pl._dialog(dataAction.service,dataAction.params)}dscDataName(){return this.e.defaultValue}_toArray(obj){return Object.keys(obj).map(function(key){return{name:key,value:obj[key]}})}init(pElement,loader){super.init(pElement,loader);var self=this;self.icon=pElement.icon;self.title=ShopProductsMenuBase.toTitleCase(pElement.name);self.kind=pElement.kind;self.params=loader.pl.paramsCopy();self.loader=this.loadData()}};