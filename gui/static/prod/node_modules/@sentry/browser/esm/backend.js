import*as tslib_1 from"../../../tslib/tslib.es6.js";import{BaseBackend}from"../../core/esm/index.js";import{Severity}from"../../types/esm/index.js";import{addExceptionMechanism,supportsFetch,SyncPromise}from"../../utils/esm/index.js";import{eventFromString,eventFromUnknownInput}from"./eventbuilder.js";import{FetchTransport,XHRTransport}from"./transports/index.js";var BrowserBackend=function(_super){tslib_1.__extends(BrowserBackend,_super);function BrowserBackend(){return null!==_super&&_super.apply(this,arguments)||this}BrowserBackend.prototype._setupTransport=function(){if(!this._options.dsn){return _super.prototype._setupTransport.call(this)}var transportOptions=tslib_1.__assign({},this._options.transportOptions,{dsn:this._options.dsn});if(this._options.transport){return new this._options.transport(transportOptions)}if(supportsFetch()){return new FetchTransport(transportOptions)}return new XHRTransport(transportOptions)};BrowserBackend.prototype.eventFromException=function(exception,hint){var syntheticException=hint&&hint.syntheticException||void 0,event=eventFromUnknownInput(exception,syntheticException,{attachStacktrace:this._options.attachStacktrace});addExceptionMechanism(event,{handled:!0,type:"generic"});event.level=Severity.Error;if(hint&&hint.event_id){event.event_id=hint.event_id}return SyncPromise.resolve(event)};BrowserBackend.prototype.eventFromMessage=function(message,level,hint){if(void 0===level){level=Severity.Info}var syntheticException=hint&&hint.syntheticException||void 0,event=eventFromString(message,syntheticException,{attachStacktrace:this._options.attachStacktrace});event.level=level;if(hint&&hint.event_id){event.event_id=hint.event_id}return SyncPromise.resolve(event)};return BrowserBackend}(BaseBackend);export{BrowserBackend};