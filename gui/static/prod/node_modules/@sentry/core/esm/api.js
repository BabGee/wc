import{Dsn,timestampWithMs,urlEncode}from"../../utils/esm/index.js";var SENTRY_API_VERSION="7",API=function(){function API(dsn){this.dsn=dsn;this._dsnObject=new Dsn(dsn)}API.prototype.getDsn=function(){return this._dsnObject};API.prototype.getStoreEndpoint=function(){return""+this._getBaseUrl()+this.getStoreEndpointPath()};API.prototype.getStoreEndpointWithUrlEncodedAuth=function(){var dsn=this._dsnObject,auth={sentry_key:dsn.user,sentry_version:SENTRY_API_VERSION};return this.getStoreEndpoint()+"?"+urlEncode(auth)};API.prototype._getBaseUrl=function(){var dsn=this._dsnObject,protocol=dsn.protocol?dsn.protocol+":":"",port=dsn.port?":"+dsn.port:"";return protocol+"//"+dsn.host+port};API.prototype.getStoreEndpointPath=function(){var dsn=this._dsnObject;return(dsn.path?"/"+dsn.path:"")+"/api/"+dsn.projectId+"/store/"};API.prototype.getRequestHeaders=function(clientName,clientVersion){var dsn=this._dsnObject,header=["Sentry sentry_version="+SENTRY_API_VERSION];header.push("sentry_timestamp="+timestampWithMs());header.push("sentry_client="+clientName+"/"+clientVersion);header.push("sentry_key="+dsn.user);if(dsn.pass){header.push("sentry_secret="+dsn.pass)}return{"Content-Type":"application/json","X-Sentry-Auth":header.join(", ")}};API.prototype.getReportDialogEndpoint=function(dialogOptions){if(void 0===dialogOptions){dialogOptions={}}var dsn=this._dsnObject,endpoint=""+this._getBaseUrl()+(dsn.path?"/"+dsn.path:"")+"/api/embed/error-page/",encodedOptions=[];encodedOptions.push("dsn="+dsn.toString());for(var key in dialogOptions){if("user"===key){if(!dialogOptions.user){continue}if(dialogOptions.user.name){encodedOptions.push("name="+encodeURIComponent(dialogOptions.user.name))}if(dialogOptions.user.email){encodedOptions.push("email="+encodeURIComponent(dialogOptions.user.email))}}else{encodedOptions.push(encodeURIComponent(key)+"="+encodeURIComponent(dialogOptions[key]))}}if(encodedOptions.length){return endpoint+"?"+encodedOptions.join("&")}return endpoint};return API}();export{API};